<app-header></app-header>

<div class="main-container">
  <div class="content">
    <div class="container">
      <div *ngIf="isAdmin; else profesorTemplate">
        <h2>Lista de Profesores</h2>
        <div class="header-actions">
          <div class="search-container">
            <input type="text" pInputText placeholder="Buscar por código de profesor..." class="search-input" />
            <button pButton type="button" icon="pi pi-search" label="Buscar" class="search-button"></button>
          </div>
          <button pButton type="button" icon="pi pi-plus" label="Añadir Nuevo" class="add-button"></button>
        </div>

        <p-table [value]="profesores" [loading]="loading" class="custom-table">
          <ng-template pTemplate="header">
            <tr>
              <th>Id</th>
              <th>Código</th>
              <th>Nombre</th>
              <th>Acciones</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-profesor>
            <tr>
              <td>{{ profesor.usuario }}</td>
              <td>{{ profesor.profesor_cod }}</td>
              <td>{{ profesor.nombre }}</td>
              <td class="actions-column">
                <button pButton type="button" icon="pi pi-eye" class="action-button" (click)="verProfesor(profesor)"></button>
                <button pButton type="button" icon="pi pi-pencil" class="action-button" (click)="editarProfesor(profesor)"></button>
                <button pButton type="button" icon="pi pi-trash" class="action-button" (click)="eliminarProfesor(profesor)"></button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
      <div class="main-container">
        <div class="content">
          <div class="container">
            <ng-template #profesorTemplate>
              <h1>Bienvenido {{ currentUser }}</h1>
              <h2>Su horario:</h2>
              <table class="table-horario">
                <caption>Horario del Profesor</caption>
                <thead>
                  <tr>
                    <th>Hora/Día</th>
                    <th>L</th>
                    <th>M</th>
                    <th>X</th>
                    <th>J</th>
                    <th>V</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let franja of franjas">
                    <td>{{ franja }}</td>
                    <td>{{ getHorarioPorFranjaYDia(franja, 'L')?.asignatura_cod.descripcion || '' }} - {{ getHorarioPorFranjaYDia(franja, 'L')?.aula_cod.descripcion || '' }}</td>
                    <td>{{ getHorarioPorFranjaYDia(franja, 'M')?.asignatura_cod.descripcion || '' }} - {{ getHorarioPorFranjaYDia(franja, 'M')?.aula_cod.descripcion || '' }}</td>
                    <td>{{ getHorarioPorFranjaYDia(franja, 'X')?.asignatura_cod.descripcion || '' }} - {{ getHorarioPorFranjaYDia(franja, 'X')?.aula_cod.descripcion || '' }}</td>
                    <td>{{ getHorarioPorFranjaYDia(franja, 'J')?.asignatura_cod.descripcion || '' }} - {{ getHorarioPorFranjaYDia(franja, 'J')?.aula_cod.descripcion || '' }}</td>
                    <td>{{ getHorarioPorFranjaYDia(franja, 'V')?.asignatura_cod.descripcion || '' }} - {{ getHorarioPorFranjaYDia(franja, 'V')?.aula_cod.descripcion || '' }}</td>
                  </tr>
                </tbody>
              </table>
            </ng-template>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</div>






